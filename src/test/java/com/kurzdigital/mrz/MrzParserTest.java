package com.kurzdigital.mrz;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import org.junit.Test;

public class MrzParserTest {
	@Test
	public void testPurify() {
		assertEquals(MrzParser.purify(" asd A  BC <<\n 9_3  "), "ABC<<93");
	}

	@Test
	public void testParse() {
		String[] samples = {
			"P<UTOERIKSSON<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<L898902C36UTO7408122X1204159ZE184226B<<<<<10",
			"P<UTOERIKSSON<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<L898902C36UTO74<<<<1X1204159ZE184226B<<<<<18",
			"P<UTOERIKSSON<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<L898902C36UTO7408122F1204159ZE184226B<<<<<10",
			"P<UTOERIKSSON<<ANNA<MARIA<<<<<<<<<<<<<<<<<<<L898902C36UTO7408122F1204159ZE184226B<<<<<10",
			"P<HUNRUSORAN<<GABRIELLA<<<<<<<<<<<<<<<<<<<<<HA10001029HUN6506146F1411166<<<<<<<<<<<<<<04",
			"P<HUNGEROEFI<<BALAZS<<<<<<<<<<<<<<<<<<<<<<<<ZJ606028<4HUN8012274M1005046<<<<<<<<<<<<<<06",
			"I<UTOBENNELONG<WOOLOOMOOLOO<W<W<<D<PD231458907UTO7408122F1204159<<<<<<<6",
			"I<UTOERIKSSON<<ANNA<MARIA<<<<<<<<<<<D231458907UTO7408122F1204159<<<<<<<6",
			"P<NLDDE<BRUIJN<<WILLEKE<LISELOTTE<<<SPECI20142NLD6503101F240309699999999",
			"I<UTOD231458907<<<<<<<<<<<<<<<7408122F1204159UTO<<<<<<<<<<<6ERIKSSON<<ANNA<MARIA<<<<<<<<<<",
			"I<USA<<<<<<<<<<<<<<<<<<<<<<<<<7607040F8107042USA<<<<<<<<<<<2PUBLIC<<JANE<Q<<<<<<<<<<<<<<<<",
			"V<UTOERIKSSON<<ANNA<MARIA<<<<<<<<<<<<<<<<<<<L8988901C4XXX4009078F96121096ZE184226B<<<<<<",
			"VDGBRKING<<JOE<<<<<<<<<<<<<<<<<<<<<<0123456<<5AUS8201010M1207172<<<<<<<<",
			"P<SVKSPECIMEN<<BIOMETRIA<<<<<<<<<<<<<<<<<<<<XB00000004SVK1111112F18010191111111111<<<<00",
			"PVNORNORMANN<<KARI<<<<<<<<<<<<<<<<<<<<<<<<<<00000000<0NOR7505319F15100364197505311234588",
			"P<SRBTEST<<MILICA<<<<<<<<<<<<<<<<<<<<<<<<<<<0000000000SRB6802295F22101042902968000000<40",
			"PMCHEDE<MAIENFELD<<PIERRE<<<<<<<<<<<<<<<<<<<S2101151<5CHE7108019M2002293<<<<<<<<<<<<<<<8",
			"P<UTOESPANOLA<ESPANOLA<<CARMEN<<<<<<<<<<<<<<XG000000<9UTO7009220F1805095123456789<<<<<74",
			"P<GBRJOHNSON<<TONY<DAVID<<<<<<<<<<<<<<<<<<<<4624719872GBR7410057M1805154<<<<<<<<<<<<<<02",
			"VCGBRNEVZOROV<<ALEKSANDR<<<<<<<<<<<<7125533156RUS8306018M1411258<<<<<<<<",
			"P<UTOERIKSSON<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<L898902C36UTO7408122F1204159ZE184226B<<<<<10",
			"P<UTOERIKSSON<<ANNA<MARIA<<<<<<<<<<<<<<<<<<<L898902C36UTO7408122F1204159ZE184226B<<<<<10",
			"P<HUNRUSORAN<<GABRIELLA<<<<<<<<<<<<<<<<<<<<<HA10001029HUN6506146F1411166<<<<<<<<<<<<<<04",
			"P<HUNGEROEFI<<BALAZS<<<<<<<<<<<<<<<<<<<<<<<<ZJ606028<4HUN8012274M1005046<<<<<<<<<<<<<<06",
			"I<UTOBENNELONG<WOOLOOMOOLOO<W<W<<D<PD231458907UTO7408122F1204159<<<<<<<6",
			"I<UTOERIKSSON<<ANNA<MARIA<<<<<<<<<<<D231458907UTO7408122F1204159<<<<<<<6",
			"P<NLDDE<BRUIJN<<WILLEKE<LISELOTTE<<<SPECI20142NLD6503101F240309699999999",
			"I<UTOD231458907<<<<<<<<<<<<<<<7408122F1204159UTO<<<<<<<<<<<6ERIKSSON<<ANNA<MARIA<<<<<<<<<<",
			"I<USA<<<<<<<<<<<<<<<<<<<<<<<<<7607040F8107042USA<<<<<<<<<<<2PUBLIC<<JANE<Q<<<<<<<<<<<<<<<<",
			"V<UTOERIKSSON<<ANNA<MARIA<<<<<<<<<<<<<<<<<<<L8988901C4XXX4009078F96121096ZE184226B<<<<<<",
			"VDGBRKING<<JOE<<<<<<<<<<<<<<<<<<<<<<0123456<<5AUS8201010M1207172<<<<<<<<",
			"P<SVKSPECIMEN<<BIOMETRIA<<<<<<<<<<<<<<<<<<<<XB00000004SVK1111112F18010191111111111<<<<00",
			"PVNORNORMANN<<KARI<<<<<<<<<<<<<<<<<<<<<<<<<<00000000<0NOR7505319F15100364197505311234588",
			"P<SRBTEST<<MILICA<<<<<<<<<<<<<<<<<<<<<<<<<<<0000000000SRB6802295F22101042902968000000<40",
			"PMCHEDE<MAIENFELD<<PIERRE<<<<<<<<<<<<<<<<<<<S2101151<5CHE7108019M2002293<<<<<<<<<<<<<<<8",
			"P<UTOESPANOLA<ESPANOLA<<CARMEN<<<<<<<<<<<<<<XG000000<9UTO7009220F1805095123456789<<<<<74",
			"P<GBRJOHNSON<<TONY<DAVID<<<<<<<<<<<<<<<<<<<<4624719872GBR7410057M1805154<<<<<<<<<<<<<<02",
			"VCGBRNEVZOROV<<ALEKSANDR<<<<<<<<<<<<7125533156RUS8306018M1411258<<<<<<<<",
			"IDFRAVALLERE<<<<<<<<<<<<<<<<<<9420301106942034318DAVID<<<<<<<<<7002210M6",
			"IDFRABERTHIER<<<<<<<<<<<<<<<<<<<<<<<8806923102858CORINNE<<<<<<<6512068F6",
			"IDCIVCI0000107<918<<<<<<<<<<<<8403294M3003172CIV118453181222BEGAN<<MACAIRE<<<<<<<<<<<<<<<<",
			"I<PRT155849387<ZZ20<<<<<<<<<<<9705261M1808122PRT<<<<<<<<<<<6NG<<WEN<JUNK<<<<<<<<<<<<<<<<<<",
			"VCD<<DENT<<ARTHUR<PHILIP<<<<<<<<<<<<1234567XY7GBR5203116M2005250<<<<<<<<"
		};
		for (String sample : samples) {
			MrzInfo mrzInfo = MrzParser.parse(sample);
			assertNotNull(mrzInfo);
			String td3 = mrzInfo.toString();
			assertEquals(MrzParser.parse(td3).toString(), td3);
		}
	}
}
